<div class="info-carousel-map-container">

  <!-- Image Carousel: -->
  <div class="carousel-container">
    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <% @flat.photos.each_with_index do |photo, index| %>
          <div class="carousel-item <%= "active" if index == 0 %>">
            <%= cl_image_tag photo.key, gravity: "center", crop: "scale" %>
          </div>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>


  <!-- flat info card: -->
  <div class="info-map-container">
    <div class="info-pic-container">
      <div class="header">
        <h1><%= @flat.name %></h1>
        <p id="location-text"><%= @flat.location %></p>
      </div>
      <div class="flat-info">
        <h4>Flat Info:</h4>
        <h5>Price per night: Â£<%= @flat.price_per_night %></h5>
        <br>
        <h5>Capacity: <%= @flat.capacity %> people</h5>
        <br>
        <h5>Location: <%= @flat.location %></h5>
        <div class="edit-button-container">
          <% if policy(@flat).edit? %>
          <p><%= link_to "Edit Flat", edit_flat_path(@flat), class: "edit-flat-button" %></p>
          <% end %>
          <% if policy(@flat).destroy? %>
          <p><%= link_to "Delete Flat", flat_path, method: :delete, class: "edit-flat-button" %></p>
          <% end %>
          <p><%= link_to 'book', new_flat_booking_path(@flat), class: 'bi btn btn-outline-danger btn-lg'  %></p>
        </div>
      </div>


    </div>
     <!-- Map Goes Here: -->
    <div class="map-container">
      <div
      id="map"
      style="width: 100%;
      height: 100%;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
      ></div>
    </div>
    <!-- reviews -->

  </div>

</div>

<%= link_to 'back', flats_path, class: 'bi btn btn-outline-danger btn-lg'  %>

